# TCP/IP 정의
컴퓨터와 컴퓨터 간의 LAN 혹은 WAN에서 원활한 통신을 가능하도록 하기 위한 통신 규약

 - TCP통신은 네트워크 통신에서 신뢰적인 연결 방식이며 가장 큰 특징은 **신뢰성**
   
  - 신뢰성이란 중간에 데이터가 유실되지 않는 것을 뜻함    
   
   - 신뢰성을 구성하는 대표적인 방법 : 흐름제어, 혼잡제어  

# 흐름 제어 Flow control

 - 송신측과 수신측의 데이터 처리 속도를 일치시키는 서비스
   
   
 - 수신측이 송신측보다 속도가 빠른 것은 문제가 되지 않지만 송신측이 수신측보다 빠를 때 문제가 발생하게 된다.    

## 흐름제어 기법 (End to End)

### **1. 정지-대기 (Stop and Wait)**

 - 데이터를 담아 패킷을 보낼 때마다 **확인 응답(ACK)을 받아야만 그 다음 패킷을 전송**할 수 있다.
   
 - 장점 : 구현방법이 단순하고 송신측내에 최대 프레임 크기의 버퍼를 1개만 잡아도 된다.
 - 단점 : 하나를 보낼때마다 응답을 받아야하기 때문에 속도가 느리고 비효율적이다

### **2. 슬라이딩 윈도우 (Sliding Window)**

수신 측에서 설정한 윈도우 크기만큼 송신 측에서 확인응답없이 세그먼트를 전송할 수 있게 하여 **데이터 흐름을 동적으로 조절하는 방법**

- 윈도우 : 송신, 수신 스테이션 양쪽에서 만들어진 버퍼의 크기

- 윈도우의 크기 = (가장 최근 ACK로 응답한 프레임 수) –(이전에 ACK 프레임을 보낸 프레임 수)

# 혼잡제어 (End to Network)

- 송신측의 데이터 전달과 네트워크의 데이터 처리 속도 차이를 해결하기 위한 기법

- 네트워크 내에 패킷의 수가 과도하게 증가하는 현상을 혼잡이라 하며 혼잡현상을 방지하거나 제거하는 기능을 혼잡제어라고 한다.

- 네트워크의 혼잡을 피하기 위해 송신측에서는 보내는 데이터의 전송 속도를 강제로 제어하게 된다.

## 혼합제어 기법  

### **1. 합 증가 / 곱 감소(AIMD: Additive Increase / Multiplicative Decrease)**

- 전송한 패킷이 문제없이 도착하면 윈도우 사이즈를 1씩 증가시키며 전송하는 방식

 

 - 패킷 전송이 실패하거나 타임아웃이 발생하면 윈도우 사이즈를 절반으로 감소시킴

 - 장점 : 모든 호스트가 공평하게 네트워크를 사용한다.

 - 단점 : 초기에 네트워크 대역폭을 사용하지 못하게 되면 시간이 오래 걸리고, 네트워크가 혼잡해지는 상황을 미리 감지할 수 없다.

### **2. Slow Start**

- AIMD의 단점을 극복하기 위한 방법으로 패킷을 하나씩 보내기 시작하고 문제없이 잘 도착한다면 ACK 패킷마다 윈도우 크기를 1씩 늘리며 하나의 주기가 끝나면 윈도우의 크기는 2배가 된다

- 그래프의 모양은 지수 함수와 같다. 

- 혼잡 현상이 발생하면 윈도우 크기를 1로 떨어뜨린다.

### **3. 혼잡 회피(Congestion Avoidance)**

- 윈도우의 크기가 임계 값에 도달한 이후에 데이터의 손실이 발생할 확률이 높아지게 됨

- 전송한 데이터에 대한 ACK을 받으면 윈도우 크기를 선형적으로 1씩 증가시키는 방식

- 수신측으로부터 일정 시간 동안까지 ACK을 수신하지 못하는 경우

	1) 타임아웃 발생

	2) 혼잡 상태로 인식된 경우

	 - 윈도우 크기를 1로 줄인다. 
	 - 동시에 임계 값을 패킷 손실이 발생하였을 때의 윈도우 크기의 반으로 줄인다.

### **4. 빠른 회복(Fast Recovery)**

- 혼잡 상태가 되면 윈도우 크기를 반으로 줄여 선형 증가시키는 방식

- 빠른 회복 정책까지 적용하면 혼잡 상황을 한번 겪고 나서부터는 순수한 AIMD방식으로 동작하게 된다.

### **5. 빠른 재전송(Fast Retransmission)**

- 중간에 누락된 세그먼트를 빠르게 재전송 하는 방식

- 중복된 순번의 패킷을 3개 받으면 패킷의 손실로 간주하여 타임아웃이 발생하기 전에 해당 패킷을 재전송한다.

- 혼잡을 감지하고 윈도우 사이즈를 줄이게 된다.




