## TCP 3-way Handshake & 4-way Handshake

### π¤ **3-way Handshake**

- Why? μ¥μΉλ“¤ μ‚¬μ΄μ— λ…Όλ¦¬μ μΈ μ ‘μ†μ„ μ„±λ¦½(establish)ν•κΈ° μ„ν•΄

![image](https://user-images.githubusercontent.com/44565524/125661341-86cf1929-3293-4730-a092-55496a4aa5cf.png)

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² SYN ν¨ν‚·μ„ λ³΄λƒ„ (sequence : x)
2. μ„λ²„κ°€ SYN(x)μ„ λ°›κ³ , ν΄λΌμ΄μ–ΈνΈλ΅ λ°›μ•λ‹¤λ” μ‹ νΈμΈ ACKμ™€ SYN ν¨ν‚·μ„ λ³΄λƒ„ (sequence : y, ACK : x + 1)
3. ν΄λΌμ΄μ–ΈνΈκ°€ ACK(y+1)λ¥Ό μ„λ²„λ΅ λ³΄λ‚΄κ³  μ—°κ²°μ΄ μ΄λ£¨μ–΄μ§

<br>

- SYN: synchronize sequence numbers
- ACK: acknowledgment

<hr>

### π¤ **4-way Handshake**

- Why? μ„Έμ…μ„ μΆ…λ£ν•κΈ° μ„ν•΄

![image](https://user-images.githubusercontent.com/44565524/125661616-04417fd9-e2ea-4dfa-8dbf-55f33a4f80af.png)

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ—°κ²°μ„ μΆ…λ£ν•λ‹¤λ” FIN ν”λκ·Έλ¥Ό λ³΄λƒ„
2. μ„λ²„λ” FINμ„ λ°›κ³ , ν™•μΈν–λ‹¤λ” ACKλ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„ (μ΄λ• λ¨λ“  λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κΈ° μ„ν•΄ CLOSE_WAIT μƒνƒκ°€ λλ‹¤)
3. λ°μ΄ν„°λ¥Ό λ¨λ‘ λ³΄λƒλ‹¤λ©΄, μ—°κ²°μ΄ μΆ…λ£λμ—λ‹¤λ” FIN ν”λκ·Έλ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„
4. ν΄λΌμ΄μ–ΈνΈλ” FINμ„ λ°›κ³ , ν™•μΈν–λ‹¤λ” ACKλ¥Ό μ„λ²„μ—κ² λ³΄λƒ„ (μ•„μ§ μ„λ²„λ΅λ¶€ν„° λ°›μ§€ λ»ν• λ°μ΄ν„°κ°€ μμ„ μ μμΌλ―€λ΅ TIME_WAITμ„ ν†µν•΄ κΈ°λ‹¤λ¦°λ‹¤)

- μ„λ²„λ” ACKλ¥Ό λ°›μ€ μ΄ν›„ μ†μΌ“μ„ λ‹«λ”λ‹¤ (Closed)
- TIME_WAIT μ‹κ°„μ΄ λλ‚λ©΄ ν΄λΌμ΄μ–ΈνΈλ„ λ‹«λ”λ‹¤ (Closed)

<br>

**TIME_WAIT**: Clientκ°€ Serverλ΅λ¶€ν„° FINμ„ μμ‹ ν•λ”λΌλ„ μΌμ •μ‹κ°„(λ””ν΄νΈ 240μ΄)λ™μ• μ„Έμ…μ„ λ‚¨κ²¨λ†“κ³  μ‰μ—¬ ν¨ν‚·μ„ κΈ°λ‹¤λ¦¬λ” κ³Όμ •
